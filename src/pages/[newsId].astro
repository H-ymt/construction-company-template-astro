---
import Layout from "../layouts/Layout.astro";
import formatDate from "../utils/formatDate";
import { getNews, getNewsDetail } from "../libs/microcms";

// 詳細記事ページの全パスを取得
export async function getStaticPaths() {
  const response = await getNews({ fields: ["id"] });

  return response.contents.map((content: any) => ({
    params: {
      newsId: content.id,
    },
  }));
}

// 記事の詳細情報を取得
const { newsId } = Astro.params;
const news = await getNewsDetail(newsId as string);
---

<Layout title="お知らせ" commonjs="./js/common.js">
  <h1>{news.title}</h1>
  <p>{formatDate(news.publishedAt)}</p>

  <div set:html={news.content} />
</Layout>
